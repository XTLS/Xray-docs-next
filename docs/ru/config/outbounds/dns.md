# DNS

DNS — это исходящий протокол, который в основном используется для перехвата и пересылки DNS-запросов.

Этот исходящий протокол может принимать только DNS-трафик (включая запросы по протоколам UDP и TCP), другие типы трафика будут вызывать ошибки.

При обработке DNS-запросов этот исходящий протокол перенаправляет IP-запросы (то есть A и AAAA) на встроенный [DNS-сервер](../dns.md). Другие типы запросов будут перенаправлены на их исходные адреса назначения.

## OutboundConfigurationObject

```json
{
  "network": "tcp",
  "address": "1.1.1.1",
  "port": 53,
  "nonIPQuery": "drop"
}
```

> `network`: "tcp" | "udp"

Изменяет транспортный протокол DNS-трафика, возможные значения: `"tcp"` и `"udp"`. Если не указан, сохраняется исходный транспортный протокол.

> `address`: address

Изменяет адрес DNS-сервера. Если не указан, сохраняется адрес, указанный в источнике.

> `port`: number

Изменяет порт DNS-сервера. Если не указан, сохраняется порт, указанный в источнике.

> `nonIPQuery`: string

Управляет не IP-запросами (не A и AAAA), `"drop"` - отбрасывать или `"skip"` - не обрабатывать встроенным DNS-сервером, а пересылать на целевой сервер. Значение по умолчанию: `"drop"`.

## Пример настройки DNS <Badge text="WIP" type="warning"/>
