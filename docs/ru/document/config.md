# Настройка и запуск

После того, как вы [скачали и установили](./install) Xray, вам потребуется его настроить.

В данном руководстве мы рассмотрим только простой способ настройки. Дополнительные шаблоны: [Xray-examples](https://github.com/XTLS/Xray-examples)

Для настройки более сложных функций обратитесь к подробным инструкциям в разделе [Файл конфигурации](../config/).

::: danger
Во избежание расшифровки вашего трафика <br>
следует сгенерировать уникальный UUID с помощью команды `xray uuid` или `uuidgen`, <br>
который затем нужно вставить на стороне сервера в поле `inbounds[0].settings.clients[0].id`, <br>
а на стороне клиента - в поле `outbounds[0].settings.vnext[0].users[0].id`. <br>
:::

## Настройка сервера

Вам понадобится сервер с публичным IP-адресом (не за NAT), на котором будет запущен Xray. Конфигурация сервера:

```json
{
  "inbounds": [
    {
      "port": 10086, // Порт, который слушает сервер
      "protocol": "vmess",
      "settings": {
        "clients": [
          {
            "id": "b831381d-6324-4d53-ad4f-8cda48b30811"  // Не забудьте заменить это поле, сгенерировав UUID с помощью `xray uuid` или `uuidgen`
          }
        ]
      }
    }
  ],
  "outbounds": [
    {
      "protocol": "freedom"
    }
  ]
}
```

Убедитесь, что `id` и порт в конфигурации сервера совпадают с настройками клиента, чтобы подключение работало correctamente.

## Настройка клиента

На вашем компьютере (или телефоне) необходимо запустить Xray со следующей конфигурацией:

```json
{
  "inbounds": [
    {
      "port": 1080, // Порт SOCKS-прокси, на него нужно будет направлять трафик в браузере
      "listen": "127.0.0.1",
      "protocol": "socks",
      "settings": {
        "udp": true
      }
    }
  ],
  "outbounds": [
    {
      "protocol": "vmess",
      "settings": {
        "vnext": [
          {
            "address": "server", // Адрес сервера, замените его на IP-адрес или доменное имя вашего сервера
            "port": 10086, // Порт сервера
            "users": [
              {
                "id": "b831381d-6324-4d53-ad4f-8cda48b30811"  // Не забудьте заменить это поле, сгенерировав UUID с помощью `xray uuid` или `uuidgen`
              }
            ]
          }
        ]
      }
    },
    {
      "protocol": "freedom",
      "tag": "direct"
    }
  ],
  "routing": {
    "domainStrategy": "IPOnDemand",
    "rules": [
      {
        "type": "field",
        "ip": ["geoip:private","geoip:cn"], // Исключить локальную сеть и диапазоны IP-адресов Китая
        "outboundTag": "direct"
      }
    ]
  }
}
```
Единственное, что вам нужно изменить в приведенной выше конфигурации, - это IP-адрес вашего сервера и UUID пользователя, как указано в комментариях. Эта конфигурация будет перенаправлять весь трафик на ваш сервер, за исключением локальной сети (например, доступ к маршрутизатору) и диапазонов IP-адресов Китая (например, доступ к bilibili, acfun).

## Запуск

- В Windows и macOS файл конфигурации обычно находится в том же каталоге, что и Xray, и называется `config.json`.
  - Просто запустите `Xray` или `Xray.exe`.
- В Linux файл конфигурации обычно находится в каталоге `/etc/xray/` или `/usr/local/etc/xray/`.
  - Запустите команду `xray run -c /etc/xray/config.json`.
  - Или используйте systemd или другой инструмент для запуска Xray как службы в фоновом режиме.

Более подробную информацию можно найти в [документации по конфигурации](../config/) и в разделе [Простыми словами](./level-0/).



